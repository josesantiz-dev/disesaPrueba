<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:rich="http://richfaces.org/rich">
    
    <rich:popupPanel id="pnlNuevoEditarContrato" autosized="true" domElementAttachment="form">
		<f:facet name="header">
			<h:outputText value="#{msg['empleado.c']}" styleClass="Titulo" style="margin-left:10px" />
		</f:facet>
		
		<f:facet name="controls">
			<h:graphicImage value="#{msg['navegacion.gral.cerrar.img']}" style="cursor:pointer;" onclick="#{rich:component('pnlNuevoEditarContrato')}.hide()" />
		</f:facet>
		
		<a4j:region id="regContrato">
			<div style="display: block; height: 22px; margin-bottom:10px; display:#{empleadoAction.esContratoNuevo ? 'block' : 'none'}">
				<h:panelGrid columns="2" style="float:right; margin-right:5px;"
					rendered="#{empleadoAction.esContratoNuevo}">
					<h:panelGroup style="vertical-align: middle; position:relative; ">
						<a4j:commandButton id="cmdSalvarContrato" style="align:right; position:relative; float:right;"  
							rendered="#{empleadoAction.esContratoNuevo}"
							image="#{msg['salvar22.img']}" 
							action="#{empleadoAction.guardarContrato}" 
							oncomplete="salvarContrato(#{empleadoAction.band}, '#{rich:clientId('pnlNuevoEditarContrato')}','#{rich:clientId('pnlMsgGralContrato')}', #{rich:element('msgErrorEmpleadoContrato')})"
							render="dtListaContratos,pnlMsgGralContrato,msgErrorEmpleadoContrato"
							limitRender="true" />
					</h:panelGroup>
					
					<h:panelGroup style="vertical-align: middle; position:relative;">
						<a4j:status>
							<f:facet name="start"><h:graphicImage value="#{msg['navegacion.loading.loading16.img']}" style="vertical-align: middle; position:relative;"/></f:facet>
							<f:facet name="stop"><h:graphicImage value="#{msg['navegacion.loading.loading_stop16.img']}" style="vertical-align: middle; position:relative;"/></f:facet>
						</a4j:status>
					</h:panelGroup>
				</h:panelGrid>
			</div>
			
			<rich:messages id="msgErrorEmpleadoContrato" ajaxRendered="true" title="Campos requeridos!" >
				<f:facet name="errorMarker"><h:graphicImage value="#{msg['alert16.img']}" style="margin-right:1em;" /></f:facet>
			</rich:messages>
			
			<h:panelGroup id="grupoEncabezadoContrato" styleClass="encabezado">
				<h:panelGrid width="100%">
					<h:panelGroup>
						<h:outputText
							value="#{empleadoAction.pojoEmpleado.persona.id == null ? '' : empleadoAction.pojoEmpleado.persona.nombre }" 
							style="text-align: center;" />
					</h:panelGroup>
				</h:panelGrid>
			</h:panelGroup>		
			
			<h:panelGroup id="grupoDatosContrato">
				<div style = "display: block; height: 22px; margin-bottom:10px;">
					<h:panelGrid columns="2" style="float:right; margin-right:5px;" >
						<h:outputLabel value="#{msg['tipo']} #{msg['contrato']}:" styleClass="Titulo" />
						<h:panelGroup style="vertical-align: middle; position:relative; ">
							<h:selectOneRadio id="radioTipoContrato"
								disabled="#{! empleadoAction.esContratoNuevo}" 
								value="#{empleadoAction.pojoContrato.determinado}"> 
								<f:selectItem id="radioTipoContratoDeterminado" itemLabel="#{msg['e.determinado']}" itemValue="1" /> 
								<f:selectItem id="radioTipoContratoInDeterminado" itemLabel="#{msg['e.indeterminado']}" itemValue="0" />
							</h:selectOneRadio>
						</h:panelGroup>
					</h:panelGrid>
				</div>
				
				<h:panelGroup style="text-align:left;">
					<h:panelGrid id="pnlDatosContrato" columns="4" width="700" columnClasses="colTitulo,colDato,colTitulo,colDato" >
						<h:outputLabel value="#{msg['fechaInicio']}:" styleClass="Titulo" />
			            <rich:calendar enableManualInput="false" datePattern="dd/MM/yyyy"
			            	disabled="#{! empleadoAction.esContratoNuevo}" 
			            	value="#{empleadoAction.pojoContrato.fechaInicio}">
			                <rich:placeholder value="dd/MM/yyyy" />
			            </rich:calendar>
			            
			            <h:outputLabel value="#{msg['modalidadPago']}:" styleClass="Titulo" />
						<h:selectOneMenu style="width:200px;"
							disabled="#{! empleadoAction.esContratoNuevo}" 
							value="#{empleadoAction.pojoContrato.formaPago}" 
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['modalidadPago']} #{msg['mensaje.error.requerido']}">
							<f:selectItem itemLabel="#{msg['seleccione']}" />
							<f:selectItems value="#{empleadoAction.listFormasPagoEmpleadosItems}" />		
						</h:selectOneMenu>
						
						<h:outputLabel value="#{msg['e.fechaTermino']}:" styleClass="Titulo" />
			            <rich:calendar enableManualInput="false" datePattern="dd/MM/yyyy"
			            	disabled="#{! empleadoAction.esContratoNuevo}" 
			            	value="#{empleadoAction.pojoContrato.fechaFin}">
			                <rich:placeholder value="dd/MM/yyyy" /> 
			            </rich:calendar>
			            
			            <h:outputLabel value="#{msg['tipoHorario']}:" styleClass="Titulo" />
			            <h:selectOneMenu style="width:200px;"
			            	disabled="#{! empleadoAction.esContratoNuevo}" 
			            	value="#{empleadoAction.pojoContrato.tipoHorario}" 
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['tipoHorario']} #{msg['mensaje.error.requerido']}">
							<f:selectItem itemLabel="#{msg['seleccione']}" />
							<f:selectItem itemValue="0" itemLabel="Oficina" />
							<f:selectItem itemValue="1" itemLabel="Obra" />
							<f:ajax event="change" render="dtHoraEntradaComplemento dtHoraSalidaComplemento" execute="@this" />
						</h:selectOneMenu>
							
						<h:outputText value="#{msg['e.centroTrabajo']}:" styleClass="Titulo" />
						<h:inputText style="width: 200px;" 
							disabled="#{! empleadoAction.esContratoNuevo}"
							value="#{empleadoAction.pojoContrato.centroTrabajo}"
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.centroTrabajo']} #{msg['mensaje.error.requerido']}" />
			            
			            <h:outputLabel value="#{msg['horaEntrada']}:" styleClass="Titulo" />
			            <h:panelGroup>
				            <h:inputText id="txtContratoHoraEntrada" style="text-align: center; width: 50px;"
				            	disabled="#{! empleadoAction.esContratoNuevo}"
				            	value="#{empleadoAction.horaEntrada}"
				            	onkeydown="return soloHora(event, this.value)"
					            onblur="validaHora(this.id, this.value, '#{msg['formatoHoraInvalido']}')"
					            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
					            requiredMessage="#{msg['horaEntrada']} #{msg['mensaje.error.requerido']}" />
				            <h:outputLabel value="#{msg['24Hrs']}" styleClass="Titulo" />
			            </h:panelGroup>
			            
			            <h:outputText value="#{msg['e.peridiocidadPago']}:" styleClass="Titulo" />
						<h:selectOneMenu style="width:206px;"
							disabled="#{! empleadoAction.esContratoNuevo}" 
							value="#{empleadoAction.pojoContrato.peridiocidadPago}" 
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.peridiocidadPago']} #{msg['mensaje.error.requerido']}">
							<f:selectItem itemLabel="#{msg['seleccione']}" />
							<f:selectItems value="#{empleadoAction.listaCboPeridiocidad}"/>		
							<f:ajax event="valueChange" render="cboCategorias"/>		  					
						</h:selectOneMenu>
			            
			            <h:outputLabel value="#{msg['horaSalida']}:" styleClass="Titulo" />
			            <h:panelGroup>
				            <h:inputText id="txtContratoHoraSalida" style="text-align: center; width: 50px;"
				            	disabled="#{! empleadoAction.esContratoNuevo}"
				            	value="#{empleadoAction.horaSalida}"
				            	onkeydown="return soloHora(event, this.value)"
					            onblur="validaHora(this.id, this.value, '#{msg['formatoHoraInvalido']}')"
					            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
					            requiredMessage="#{msg['horaSalida']} #{msg['mensaje.error.requerido']}" />
				            <h:outputLabel value="#{msg['24Hrs']}" styleClass="Titulo" />
			            </h:panelGroup>
			            
			            <h:outputText value="#{msg['e.diaDescanso']}:" styleClass="Titulo" />
						<h:selectOneMenu style="width:206px;"
							disabled="#{! empleadoAction.esContratoNuevo}" 
							value="#{empleadoAction.pojoContrato.diaDescanso}" 
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.diaDescanso']} #{msg['mensaje.error.requerido']}">
							<f:selectItem itemLabel="#{msg['seleccione']}" />
							<f:selectItems value="#{empleadoAction.listaCboDias}" />
							<f:ajax event="valueChange" render="cboCategorias" />
						</h:selectOneMenu>
			            
			            <h:outputLabel value="#{msg['horaEntrada']}:" styleClass="Titulo" title="#{msg['complemento']}" />
			            <h:panelGroup>
				            <h:inputText id="dtHoraEntradaComplemento" style="text-align: center; width: 50px;"
				            	disabled="#{empleadoAction.pojoContrato.tipoHorario == 1 || ! empleadoAction.esContratoNuevo}"
				            	value="#{empleadoAction.horaEntradaComplemento}"
				            	onkeydown="return soloHora(event, this.value)"
					            onblur="validaHora(this.id, this.value, '#{msg['formatoHoraInvalido']}')"
					            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
					            requiredMessage="#{msg['horaEntrada']} #{msg['complemento']} #{msg['mensaje.error.requerido']}" />
				            <h:outputLabel value="#{msg['24Hrs']}" styleClass="Titulo" />
			            </h:panelGroup>
						
			            <h:outputText value="#{msg['e.sueldo']}:" styleClass="Titulo" />
						<h:inputText maxlength="15" style="width: 100px; text-align:right;"
							disabled="#{! empleadoAction.esContratoNuevo}" 
							value="#{empleadoAction.pojoContrato.sueldo}"
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.sueldo']} #{msg['mensaje.error.requerido']}"
				            onkeypress="return soloDecimales(event, this.value, 10, 2);" />
			            
			            <h:outputLabel value="#{msg['horaSalida']}:" styleClass="Titulo" title="#{msg['complemento']}" />
			            <h:panelGroup>
				            <h:inputText id="dtHoraSalidaComplemento" style="text-align: center; width: 50px;"
				            	disabled="#{empleadoAction.pojoContrato.tipoHorario == 1 || ! empleadoAction.esContratoNuevo}"
				            	value="#{empleadoAction.horaSalidaComplemento}"
				            	onkeydown="return soloHora(event, this.value)"
					            onblur="validaHora(this.id, this.value, '#{msg['formatoHoraInvalido']}')"
					            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
					            requiredMessage="#{msg['horaSalida']} #{msg['complemento']} #{msg['mensaje.error.requerido']}" />
				            <h:outputLabel value="#{msg['24Hrs']}" styleClass="Titulo" />
			            </h:panelGroup>
						
			            <h:outputText value="#{msg['e.sueldoHora']}:" styleClass="Titulo" />
						<h:inputText maxlength="8" style="width: 70px; text-align: right;"  
							disabled="#{! empleadoAction.esContratoNuevo}"
							value="#{empleadoAction.pojoContrato.sueldoHora}"
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.sueldoHora']} #{msg['mensaje.error.requerido']}"
				            onkeypress="return soloDecimales(event, this.value, 6, 2);" />
						
			            <h:outputText value="#{msg['e.sueldoHoraExtra']}:" styleClass="Titulo" />
						<h:inputText maxlength="8" style="width: 70px; text-align: right;"  
							disabled="#{! empleadoAction.esContratoNuevo}"
							value="#{empleadoAction.pojoContrato.sueldoHoraExtra}"
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.sueldoHoraExtra']} #{msg['mensaje.error.requerido']}"
				            onkeypress="return soloDecimales(event, this.value, 6, 2);" />
			            
			            <h:outputText value="#{msg['e.descuentoInfonavit']}:" styleClass="Titulo" />
						<h:inputText maxlength="10" style="width: 70px; text-align:right;" 
							disabled="#{! empleadoAction.esContratoNuevo}"
							value="#{empleadoAction.pojoContrato.descuentoInfonavit}"
				            required="#{!empty param[rich:clientId('cmdSalvarContrato')]}"
				            requiredMessage="#{msg['e.descuentoInfonavit']} #{msg['mensaje.error.requerido']}"
				            onkeypress="return soloDecimales(event, this.value, 8, 2);" />
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
		</a4j:region>
	</rich:popupPanel>
</ui:composition>